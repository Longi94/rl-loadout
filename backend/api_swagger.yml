openapi: 3.0.0
info:
  version: "{{ version }}"
  title: 'Rocket Loadout Public API'
  contact:
    name: 'Rocket Loadout Discord'
    url: https://discord.gg/c8cArY9
servers:
  - url: "{{ server_host }}/api"
security:
  - ApiKeyAuth: []
tags:
  - name: bodies
  - name: texture
paths:
  /bodies:
    get:
      summary: 'Get a list of bodies'
      operationId: controllers.bodies.get
      tags:
        - bodies
      responses:
        200:
          description: 'List of bodies'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Body'
  /bodies/{id}:
    get:
      summary: 'Get a body'
      operationId: controllers.bodies.get_by_id
      tags:
        - bodies
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID of the item (in-game item ID).'
          example: 23
          schema:
            type: integer
        - name: fallback
          in: query
          required: false
          description: 'If set to true, If the body is not found, it will fall back to the Octane body. Otherwise, returns with 404.'
          example: true
          schema:
            type: boolean
            default: false
      responses:
        200:
          description: 'Body'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Body'
        404:
          description: 'Body not found'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /textures/body:
    get:
      summary: 'Generate a body texture'
      description: 'Generate a body texture based on the body and provided colors. Custom colors will override any preset colors. If no colors are provided, the default blue/orange colors will be used depending on the "team" parameter.'
      operationId: controllers.textures.body.get
      tags:
        - texture
      externalDocs:
        description: 'Documentation on the GLTF files.'
        url: https://github.com/Longi94/rl-loadout/wiki/GLTF-files
      parameters:
        - name: body_id
          in: query
          required: true
          example: 23
          description: 'The ID of the body used in replay files'
          schema:
            type: integer
        - name: primary_color
          in: query
          required: false
          description: 'The ID of primary color of the body.'
          example: 35
          schema:
            type: integer
            maximum: 69
            minimum: 0
        - name: primary_color_custom
          in: query
          required: false
          description: 'Custom primary color of the body in 0xFFFFFF integer format.'
          example: 16777215
          schema:
            type: integer
            maximum: 16777215
            minimum: 0
        - name: accent_color
          in: query
          required: false
          description: 'The ID of accent color of the body.'
          example: 0
          schema:
            default: 0
            type: integer
            maximum: 104
            minimum: 0
        - name: accent_color_custom
          in: query
          required: false
          description: 'Custom accent color of the body in 0xFFFFFF integer format.'
          example: 16777215
          schema:
            type: integer
            maximum: 16777215
            minimum: 0
        - name: body_paint
          in: query
          required: false
          description: 'The ID of the paint. See https://github.com/Longi94/rl-loadout/blob/master/backend/rocket/paint.py for list of IDs.'
          example: 1
          schema:
            type: integer
            maximum: 13
            minimum: 0
        - name: body_paint_custom
          in: query
          required: false
          description: 'Custom body paint color of the body in 0xFFFFFF integer format.'
          example: 16777215
          schema:
            type: integer
            maximum: 16777215
            minimum: 0
        - name: team
          in: query
          required: false
          description: 'If this is set, the default blue (0) or the default orange (1) color will be used. This is ignored if primary_color is set.'
          example: 0
          schema:
            type: integer
            enum: [0, 1]
            default: 0
        - name: fallback
          in: query
          required: false
          description: 'If set to true, if the decal is not found, it will fall back to the default skin of the body. If the body is not found, it will fall back to the Octane skin. Otherwise, returns with 404.'
          example: true
          schema:
            type: boolean
            default: false
      responses:
        200:
          description: 'Returns the texture in the chosen format'
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
        404:
          description: 'If the texture was not found'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /textures/chassis:
    get:
      summary: 'Generate a chassis texture'
      description: 'Generate a chassis texture based on the body and provided colors. Only a few bodies need this as most of the chassis is not paintable. Custom colors will override any preset colors.'
      operationId: controllers.textures.chassis.get
      tags:
        - texture
      parameters:
        - name: body_id
          in: query
          required: true
          example: 23
          description: 'The ID of the body used in replay files'
          schema:
            type: integer
        - name: primary_color
          in: query
          required: false
          description: 'The ID of primary color of the body. Currently only needed for the DeLorean.'
          example: 35
          schema:
            type: integer
            maximum: 69
            minimum: 0
        - name: primary_color_custom
          in: query
          required: false
          description: 'Custom primary color of the body in 0xFFFFFF integer format. Currently only needed for the DeLorean.'
          example: 16777215
          schema:
            type: integer
            maximum: 16777215
            minimum: 0
        - name: accent_color
          in: query
          required: false
          description: 'The ID of accent color of the body. Some bodies like the Artemis G1 are affected by the accent color'
          example: 0
          schema:
            default: 0
            type: integer
            maximum: 104
            minimum: 0
        - name: accent_color_custom
          in: query
          required: false
          description: 'Custom accent color of the body in 0xFFFFFF integer format.'
          example: 16777215
          schema:
            type: integer
            maximum: 16777215
            minimum: 0
        - name: body_paint
          in: query
          required: false
          description: 'The ID of the paint. See https://github.com/Longi94/rl-loadout/blob/master/backend/rocket/paint.py for list of IDs.'
          example: 1
          schema:
            type: integer
            maximum: 13
            minimum: 0
        - name: body_paint_custom
          in: query
          required: false
          description: 'Custom body paint color of the body in 0xFFFFFF integer format.'
          example: 16777215
          schema:
            type: integer
            maximum: 16777215
            minimum: 0
        - name: team
          in: query
          required: false
          description: 'Used when the chassis has different textures for the teams (e.g. Jurassic Jeep)'
          example: 0
          schema:
            type: integer
            enum: [0, 1]
            default: 0
        - name: fallback
          in: query
          required: false
          description: 'If set to true, If the body is not found, it will fall back to the Octane skin. Otherwise, returns with 404.'
          example: true
          schema:
            type: boolean
            default: false
      responses:
        200:
          description: 'Returns the texture in the chosen format'
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
        404:
          description: 'If the texture was not found'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: query
      name: key
      x-apikeyInfoFunc: api.verify_api_key
  schemas:
    Error:
      type: object
      properties:
        details:
          type: string
          description: 'Details of the error'
          example: 'X not found'
        status:
          type: number
          description: 'HTTP status code'
          example: 404
    Body:
      type: object
      required:
        - model
        - name
        - paintable
      properties:
        id:
          type: integer
          description: 'ID of the item used in replay files.'
          example: 23
        model:
          type: string
          description: 'URL to the GLTF model of the body'
          example: https://storage.googleapis.com/rl-loadout/models/Body_Octane_SF.glb
        name:
          type: string
          description: 'Name of the body'
          example: Octane
        paintable:
          type: boolean
          description: 'Indicates whether the body has painted variants in the game or not.'
          example: true
        body_texture:
          type: string
          description: 'Path to the default (blue) body texture'
          example: '/api/textures/body?key=123&body_id=0'
        chassis_texture:
          type: string
          description: 'Path to the default chassis texture. This is null if the chassis of the body is not paintable, in the case the chassis in the model is already textured.'
          example: '/api/textures/chassis?key=123&body_id=0'
